<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Today's HotDeal!</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<style type="text/css">
	body{
		font-family: 'Noto Sans KR', sans-serif;
		padding-top: 81px;
	}
	.limit{font-size: 20px;}
	
	.timer1,.timer2,.timer3{
		border:1px solid #fff;
		background-color: #EBEBF0;
		width:120px;
		height: 36px;
		display: inline-block;
		color: #FF9FA1;
		font-size: 25px;
	}
	
	.price{
		font-size:23px;
		font-weight:bold;
		color:red;
	}
	
	.card{
		display: inline-block;
		width: 360px;
		height: 640px;
		font-size: 20px;
		margin: 10px;
	}
	
	.ment{font-size:30px;}
	#ment{font-size:45px;}
	.name{font-size:30px;}
	.material,.size{font-size:17px;}
	
</style>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript">
// header, footer include
$(document).ready(function(){
    $("#header").load("/header.html");
    $("#footer").load("/footer.html");
    $("#floatingbar").load("/floatingbar1.html");
});

$(function(){
	//milliseconds를 시:분:초로 바꾸기
	let SecondsTohhmmss = function(totalSeconds) {
  	let hours   = Math.floor(totalSeconds / 3600);
  	let minutes = Math.floor((totalSeconds - (hours * 3600)) / 60);
  	let seconds = totalSeconds - (hours * 3600) - (minutes * 60);
	  	seconds = Math.round(seconds * 100) / 100
	  	
  	let result = (hours < 10 ? "0" + hours : hours);
	    result += ":" + (minutes < 10 ? "0" + minutes : minutes);
	    result += ":" + (seconds  < 10 ? "0" + seconds : seconds);
	return result;
	}//SecondsTohhmmss

	
	/*-----핫딜 조건별 조회1, 찜 횟수(wishList_tb에서 최다 작품번호를 조회 후 목록 출력)-----*/
	$.ajax({url:"/listHot_1.do",
		success:function(data){
			let arr = eval(data);
			$.each(arr,function(index,hot){
			
			//가격에 쉼표 [by 최은혜]
			let aucBidString = (hot.aucBid).toString(); 
			let aucBid = aucBidString.replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
			let aucBuyString = (hot.aucBuy).toString();
			let aucBuy = aucBuyString.replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",");
			
			let art_pic = $(`<div class="card-body p-0"></div>`).html($(`<img width="100%" height="250px">`).attr("src","./art_pic/"+hot.artPic));
			let art_name = $(`<div class="name card-body p-0"></div>`).html(`<b>`+hot.artName+`</b>`);
			let art_material = $(`<div class="material card-body p-0"></div>`).html(hot.artMaterial);
			let art_size = $(`<div class="size card-body p-0"></div>`).html(hot.artSize1+" x "+hot.artSize2+"(cm)");
			let art_year = $(`<div class="year card-body p-0"></div>`).html(hot.artYear);
			let auc_bid = $(`<div class="card-body p-0"></div>`).html("현재입찰가:  "+"<span class='price'>"+aucBid+"</span>"+" 원");
			let auc_buy = $(`<div class="card-body p-0"></div>`).html("즉시구매가:  "+aucBuy+" 원");
			let auction = $(`<a class="btn btn-dark"></a>`).attr("href","auction.html?artNo="+hot.artNo).html("경매장으로");
			$("#div1").append(art_pic,art_name,art_material,art_size,art_year,auc_bid,auc_buy,auction);
		});
	}});
	
	/*-----핫딜 조건별 조회1 (남은시간 출력)*/
	let reTime1 = setInterval(function() {	
		$.ajax({url:"/listHot_1.do",
			success:function(data){
				let arr = eval(data);
				$.each(arr,function(index,hot){
				let timer = $(".timer1").html(SecondsTohhmmss(hot.artTime));
				
			});
		}});
	},1000)	
	
	
	
	/*-----핫딜 조건별 조회2, 입찰횟수가 많은 작품정보-----*/
	$.ajax({url:"/listHot_2.do",
		success:function(data){
			let arr = eval(data);	
			$.each(arr,function(index,hot){
			
			//가격에 쉼표 [by 최은혜]
			let aucBidString = (hot.aucBid).toString(); 
			let aucBid = aucBidString.replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
			let aucBuyString = (hot.aucBuy).toString();
			let aucBuy = aucBuyString.replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",");

			let art_pic = $(`<div class="card-body p-0"></div>`).html($(`<img width="100%" height="250px">`).attr("src","./art_pic/"+hot.artPic));
			let art_name = $(`<div class="name card-body p-0"></div>`).html(`<b>`+hot.artName+`</b>`);
			let art_material = $(`<div class="material card-body p-0"></div>`).html(hot.artMaterial);
			let art_size = $(`<div class="size card-body p-0"></div>`).html(hot.artSize1+" x "+hot.artSize2+"(cm)");
			let art_year = $(`<div class="year card-body p-0"></div>`).html(hot.artYear);
			let auc_bid = $(`<div class="card-body p-0"></div>`).html("현재입찰가:  "+"<span class='price'>"+aucBid+"</span>"+" 원");
			let auc_buy = $(`<div class="card-body p-0"></div>`).html("즉시구매가:  "+aucBuy+" 원");
			let auction = $(`<a class="btn btn-dark"></a>`).attr("href","auction.html?artNo="+hot.artNo).html("경매장으로");
			$("#div2").append(art_pic,art_name,art_material,art_size,art_year,auc_bid,auc_buy,auction);
		});
	}});
	
	/*-----핫딜 조건별 조회2 (남은시간 출력)-----*/
	let reTime2 = setInterval(function() {	
		$.ajax({url:"/listHot_2.do",
			success:function(data){
				let arr = eval(data);
				$.each(arr,function(index,hot){
				let timer = $(".timer2").html(SecondsTohhmmss(hot.artTime));
			});
		}});
	},1000)	
	
	
	
	/*-----핫딜 조건별 조회3, 마감시간 임박-----*/
	$.ajax({url:"/listHot_3.do",
		success:function(data){
			let arr = eval(data);	
			$.each(arr,function(index,hot){
			
			//가격에 쉼표 [by 최은혜]
			let aucBidString = (hot.aucBid).toString(); 
			let aucBid = aucBidString.replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
			let aucBuyString = (hot.aucBuy).toString();
			let aucBuy = aucBuyString.replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",");
			
			let art_pic = $(`<div class="card-body p-0"></div>`).html($(`<img width="100%" height="250px">`).attr("src","./art_pic/"+hot.artPic));
			let art_name = $(`<div class="name card-body p-0"></div>`).html(`<b>`+hot.artName+`<b>`);
			let art_material = $(`<div class="material card-body p-0"></div>`).html(hot.artMaterial);
			let art_size = $(`<div class="size card-body p-0"></div>`).html(hot.artSize1+" x "+hot.artSize2+"(cm)");
			let art_year = $(`<div class="year card-body p-0"></div>`).html(hot.artYear);
			let auc_bid = $(`<div class="card-body p-0"></div>`).html("현재입찰가:  "+"<span class='price'>"+aucBid+"</span>"+" 원");
			let auc_buy = $(`<div class="card-body p-0"></div>`).html("즉시구매가:  "+aucBuy+" 원");
			let auction = $(`<a class="btn btn-dark"></a>`).attr("href","auction.html?artNo="+hot.artNo).html("경매장으로");
			$("#div3").append(art_pic,art_name,art_material,art_size,art_year,auc_bid,auc_buy,auction);
		});
	}});
	
	/*-----핫딜 조건별 조회3 (남은시간 출력)-----*/
	let reTime3 = setInterval(function() {
 		$.ajax({url:"/listHot_3.do",
			success:function(data){
				let arr = eval(data);
				$.each(arr,function(index,hot){
				let timer = $(".timer3").html(SecondsTohhmmss(hot.artTime));
			});
		}});
	},1000)
});
</script>
</head>
<body>
<header id="header"></header>
<div id="floatingbar"></div>
<div id=ment class="text-center">오늘의 핫한 작품을 여기서 만나보세요!</div>
<div class="container" style="margin-bottom: 60px; margin-top: 60px;">
 	<div class="row">
		<div class="col-sm-4">
			<div class="text-center">		
				<span class="ment">인기순(찜 횟수↑)</span><span class="badge badge-pill badge-danger">HOT</span><br><br>
				<span class="limit">남은 시간:</span>&nbsp;&nbsp;<span class="timer1"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</div>
			<div id="div1" class="card"></div>
		</div>
		
		<div class="col-sm-4">
			<div class="text-center">
				<span class="ment">입찰순</span> <span class="badge badge-pill badge-warning">NEW</span><br><br>
				<span class="limit">남은 시간:</span>&nbsp;&nbsp;<span class="timer2"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</div>
			<div id="div2" class="card"></div>
		</div>
		
		<div class="col-sm-4">
			<div class="text-center">
				<span class="ment">마감 임박</span> <span class="badge badge-pill badge-warning">NEW</span><br><br>
				<span class="limit">남은 시간:</span>&nbsp;&nbsp;<span class="timer3"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</div>
			<div id="div3" class="card"></div>
		</div>
	</div>
</div>
<footer id="footer"></footer>
</body>
</html>