<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Today's HotDeal!</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<style type="text/css">
	body{
		font-family: 'Noto Sans KR', sans-serif;
		padding-top: 81px;
		margin: 20px;
	}
	
	
	.limit{
		border: 1px solid #A7C9A7;
		font-size: 30px;
		color: #49AAF5; 
	}
	
	.timer1,.timer2,.timer3{
		width:90px;
		height: 30px;
		display: inline-block;
		color: #F50038;
		font-size: 30px;
	}
	
	.card{
		display: inline-block;
		width: 350px;
		height: 640px;
		font-size: 20px;
	}
	
	#title{
		font-size: 40px;
	}
	
</style>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript">
// header, footer include
$(document).ready(function(){
    $("#header").load("/header.html");
    $("#footer").load("/footer.html");
});

$(function(){
	
	//milliseconds를 시:분:초로 바꾸기
	let SecondsTohhmmss = function(totalSeconds) {
  	let hours   = Math.floor(totalSeconds / 3600);
  	let minutes = Math.floor((totalSeconds - (hours * 3600)) / 60);
  	let seconds = totalSeconds - (hours * 3600) - (minutes * 60);
	  	seconds = Math.round(seconds * 100) / 100
	  	
  	let result = (hours < 10 ? "0" + hours : hours);
	    result += ":" + (minutes < 10 ? "0" + minutes : minutes);
	    result += ":" + (seconds  < 10 ? "0" + seconds : seconds);
	return result;
	}//SecondsTohhmmss

	
	/*-----핫딜 조건별 조회1, 찜 횟수(wishList_tb에서 최다 작품번호를 조회 후 목록 출력)-----*/
	$.ajax({url:"/listHot_1.do",
		success:function(data){
			let arr = eval(data);
			$.each(arr,function(index,hot){
			
				let artPic = $(`<div class="card-body"></div>`).html($("<img>").attr("src","./art_pic/"+hot.artPic).css("width","320px","height","95px"));
				let artName = $(`<div class="card-body"></div>`).html("작품명: "+hot.artName);
				let artMaterial = $(`<div class="card-body"></div>`).html("재료: "+hot.artMaterial);
				let artSize = $(`<div class="card-body"></div>`).html("사이즈: "+hot.artSize1+" x "+hot.artSize2+"(cm)");
				let aucBid = $(`<div class="card-body"></div>`).html("현재입찰가: "+hot.aucBid+"원");
				let aucBuy = $(`<div class="card-body"></div>`).html("즉시구매가: "+hot.aucBuy+"원");
				let auction = $(`<a class="btn btn-success"></a>`).attr("href","auction.html?artNo="+hot.artNo).html("경매장으로");
				$("#div1").append(artPic,artName,artMaterial,artSize,aucBid,aucBuy,auction);
		});
	}});
	
	/*-----핫딜 조건별 조회1 (남은시간 출력)*/
	let reTime1 = setInterval(function() {	
		$.ajax({url:"/listHot_1.do",
			success:function(data){
				let arr = eval(data);
				$.each(arr,function(index,hot){
				let timer = $(".timer1").html(SecondsTohhmmss(hot.artTime));
			});
		}});
	},1000)	
	
	
	
	/*-----핫딜 조건별 조회2, 입찰횟수가 많은 작품정보-----*/
	$.ajax({url:"/listHot_2.do",
		success:function(data){
			let arr = eval(data);	
			$.each(arr,function(index,hot){
			let artPic = $(`<div class="card-body"></div>`).html($("<img>").attr("src","./art_pic/"+hot.artPic).css("width","320px","height","95px"));
			let artName = $(`<div class="card-body"></div>`).html("작품명: "+hot.artName);
			let artMaterial = $(`<div class="card-body"></div>`).html("재료: "+hot.artMaterial);
			let artSize = $(`<div class="card-body"></div>`).html("사이즈: "+hot.artSize1+" x "+hot.artSize2+"(cm)");
			let aucBid = $(`<div class="card-body"></div>`).html("현재입찰가: "+hot.aucBid+"원");
			let aucBuy = $(`<div class="card-body"></div>`).html("즉시구매가: "+hot.aucBuy+"원");
			let auction = $(`<a class="btn btn-success"></a>`).attr("href","auction.html?artNo="+hot.artNo).html("경매장으로");
			$("#div2").append(artPic,artName,artMaterial,artSize,aucBid,aucBuy,auction);
		});
	}});
	
	/*-----핫딜 조건별 조회2 (남은시간 출력)-----*/
	let reTime2 = setInterval(function() {	
		$.ajax({url:"/listHot_2.do",
			success:function(data){
				let arr = eval(data);
				$.each(arr,function(index,hot){
				let timer = $(".timer2").html(SecondsTohhmmss(hot.artTime));
			});
		}});
	},1000)	
	
	
	
	/*-----핫딜 조건별 조회3, 마감시간 임박-----*/
	$.ajax({url:"/listHot_3.do",
		success:function(data){
			let arr = eval(data);	
			$.each(arr,function(index,hot){
			let artPic = $(`<div class="card-body"></div>`).html($("<img>").attr("src","./art_pic/"+hot.artPic).css("width","320px","height","115px"));
			let artName = $(`<div class="card-body"></div>`).html("작품명: "+hot.artName);
			let artMaterial = $(`<div class="card-body"></div>`).html("재료: "+hot.artMaterial);
			let artSize = $(`<div class="card-body"></div>`).html("사이즈: "+hot.artSize1+" x "+hot.artSize2+"(cm)");
			let aucBid = $(`<div class="card-body"></div>`).html("현재입찰가: "+hot.aucBid+"원");
			let aucBuy = $(`<div class="card-body"></div>`).html("즉시구매가: "+hot.aucBuy+"원");
			let auction = $(`<a class="btn btn-success"></a>`).attr("href","auction.html?artNo="+hot.artNo).html("경매장으로");
			$("#div3").append(artPic,artName,artMaterial,artSize,aucBid,aucBuy,auction);
		});
	}});
	
	/*-----핫딜 조건별 조회3 (남은시간 출력)-----*/
	let reTime3 = setInterval(function() {
 		$.ajax({url:"/listHot_3.do",
			success:function(data){
				let arr = eval(data);
				$.each(arr,function(index,hot){
				let timer = $(".timer3").html(SecondsTohhmmss(hot.artTime));
			});
		}});
	},1000)
});
</script>
</head>
<body>
<header id="header"></header>
<div class="container" style="margin-bottom: 60px; margin-top: 60px;">
<span id=title>오늘의 핫한 작품을 여기서 만나보세요!</span><br>
 	<div class="row">
		<div class="col-sm-4">
			<h3>인기순 <span class="badge badge-pill badge-danger">HOT</span></h3>
			<div class="limit">남은시간<span class="timer1"></span></div>
			<div id="div1" class="card"></div>
		</div>
		
		<div class="col-sm-4">
			<h3>입찰 No.<b color="red">1</b> <span class="badge badge-pill badge-warning">NEW</span></h3>
			<div class="limit">남은시간<span class="timer2"></span></div>
			<div id="div2" class="card"></div>
		</div>
		
		<div class="col-sm-4">
			<h3>마감 임박 <span class="badge badge-pill badge-warning">NEW</span></h3>
			<div class="limit">남은시간<span class="timer3"></span></div>
			<div id="div3" class="card"></div>
		</div>
	</div>
</div>
<footer id="footer"></footer>
</body>
</html>